knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(RColorBrewer)
path_numbers_risk_graph <- "/Users/georgiagore-langton/OneDrive - London School of Hygiene and Tropical Medicine/PhD_1/R/20200706_number at risk flow diagram"
numbers <- read_excel(paste(path_numbers_risk_graph, "20200706_MIP_STI_numbers_to_plot.xlsx", sep="/"))
View(numbers)
numbers <- numbers %>% mutate(n_plot = round(n/1000000, 2),
n_label = paste(as.character(n_plot), "M", sep=" "))
numbers$prev <- (numbers$prev*100)
numbers <- prev %>% numbers$prev*100
numbers$prev <- format(round(numbers$prev,2), nsmall = 2)
numbers$prev <- format(round(numbers$prev,2), nsmall = 0)
numbers$prev <- paste(as.character(prev), "%", sep = " "))
numbers$prev <- paste(as.character(prev), "%", sep = " ")
numbers$prev <- paste(as.character(numbers$prev), "%", sep = " ")
numbers <- read_excel(paste(path_numbers_risk_graph, "20200706_MIP_STI_numbers_to_plot.xlsx", sep="/"))
numbers <- numbers %>% mutate(n_plot = round(n/1000000, 2), paste(as.character(n_plot), "M", sep=" "))
numbers <- read_excel(paste(path_numbers_risk_graph, "20200706_MIP_STI_numbers_to_plot.xlsx", sep="/"))
numbers <- numbers %>% mutate(n_plot = round(n/1000000, 2),
n_plot = paste(as.character(n_plot), "M", sep=" "))
levels(numbers$source)
levels(numbers$ref)
names(numbers$ref)
numbers$prev <- (numbers$prev*100)
numbers$prev <- format(round(numbers$prev,2), nsmall = 2)
numbers$prev <- paste(as.character(numbers$prev), "%", sep = " ")
# make label show % prevalence rather than nmber of women for all but total number at risk
numbers <- numbers %>% mutate(n_label = if_else(ref=="PhD Objective One", n_plot, prev))
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "*", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), "⁴", sep=""), "NA")))))
num <- 11
mycolors <- c(colorRampPalette(brewer.pal(8, "Spectral"))(num))
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(RColorBrewer)
path_numbers_risk_graph <- "/Users/georgiagore-langton/OneDrive - London School of Hygiene and Tropical Medicine/PhD_1/R/20200706_number at risk flow diagram"
numbers <- read_excel(paste(path_numbers_risk_graph, "20200706_MIP_STI_numbers_to_plot.xlsx", sep="/"))
numbers <- numbers %>% mutate(n_plot = round(n/1000000, 2),
n_plot2 = paste(as.character(n_plot), "M", sep=" "))
numbers$prev <- (numbers$prev*100)
numbers$prev <- format(round(numbers$prev,2), nsmall = 2)
numbers$prev <- paste(as.character(numbers$prev), "%", sep = " ")
# make label show % prevalence rather than nmber of women for all but total number at risk
numbers <- numbers %>% mutate(n_label = if_else(ref=="PhD Objective One", n_plot2, prev))
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "*", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), "⁴", sep=""), "NA")))))
num <- 11
mycolors <- c(colorRampPalette(brewer.pal(8, "Spectral"))(num))
path_numbers_risk_graph <- "/Users/georgiagore-langton/OneDrive - London School of Hygiene and Tropical Medicine/PhD_1/R/20200706_number at risk flow diagram"
numbers <- read_excel(paste(path_numbers_risk_graph, "20200706_MIP_STI_numbers_to_plot.xlsx", sep="/"))
numbers <- numbers %>% mutate(n_plot = round(n/1000000, 2),
n_plot2 = paste(as.character(n_plot), "M", sep=" "))
numbers$prev <- (numbers$prev*100)
numbers$prev <- format(round(numbers$prev,2), nsmall = 2)
numbers$prev <- paste(as.character(numbers$prev), "%", sep = " ")
# make label show % prevalence rather than nmber of women for all but total number at risk
numbers <- numbers %>% mutate(n_label = if_else(ref=="PhD Objective One", n_plot2, prev))
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "*", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), "⁴", sep=""), "NA")))))
num <- 11
mycolors <- c(colorRampPalette(brewer.pal(8, "Spectral"))(num))
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path(colour_fill_brewer = "blues") +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path(colour_fill_manual = "blues") +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var) colour_fill_brewer = "blues") +
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var),colour_fill_brewer = "blues") +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var),colour_fill_brewer = "blues") +
geom_path(colour = "blue") +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var),colour_fill_brewer = "blues") +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4, colour = "blue") +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var),colour_fill_brewer = "blues") +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4, colour = "blue") +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4, colour = "grey") +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_line() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_line(colour= "grey") +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "¹", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "²", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), "⁴", sep=""), "NA")))))
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "¹", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "²", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), "⁵", sep=""), "NA")))))
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "¹", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "²", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), "³", sep=""), "NA")))))
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "¹", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "²", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), "4", sep=""), "NA")))))
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "¹", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "²", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), "⁴", sep=""), "NA")))))
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "¹", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "²", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), ["4"], sep=""), "NA")))))
numbers <- numbers %>% mutate(var_ref = if_else(ref=="PhD Objective One", paste(as.character(var), "¹", sep=""),
if_else(ref=="World Malaria Report 2018", paste(as.character(var), "²", sep=""),
if_else(ref=="Chico et al. JAMA", paste(as.character(var), "³", sep="" ),
if_else(ref=="Chaponda et al. ASTMH", paste(as.character(var), "⁴", sep=""), "NA")))))
plot <- numbers %>%
ggplot(., aes(n_plot, y, colour = var)) +
geom_path() +
geom_text(aes(label=ifelse(n==0,as.character(var_ref),'')),hjust=0, vjust=-0.4) +
geom_text(aes(size= , label=ifelse(n!=0,as.character(n_label),'')),hjust=0, vjust=1) +
theme(legend.position = "none") + theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),legend.position="none",
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())+
scale_x_continuous(expand = c(.15, .15))+
scale_y_continuous(expand = c(.15, .15))
plot
numbers$n_plot_r <- runif(min = 3, max = 20)
n = length(n_plot)
n= length(numbers$n_plot)
n= nrow(numbers$n_plot)
n= nrow(numbers)
n = nrow(numbers)
n <- 22
numbers$n_plot_r <- runif(n=n, min = 3, max = 20)
numbers <- numbers %>% mutate(n_plot_r = if_else(var = "Total pregnancies" | var = "At risk of MiP", n_label, runif(n=18, min = 3, max = 20)
numbers <- numbers %>% mutate(n_plot_r = if_else((var = "Total pregnancies" | var = "At risk of MiP"), n_label, runif(n=18, min = 3, max = 20)
numbers <- numbers %>% mutate(n_plot_r = if_else((var == "Total pregnancies" | var == "At risk of MiP"), n_label, runif(n=18, min = 3, max = 20)
numbers <- numbers %>% mutate(n_plot_r = if_else((var == "Total pregnancies" | var == "At risk of MiP"), n_label, runif(n=18, min = 3, max = 20)))
numbers <- numbers %>% mutate(n_plot_r = runif(n=18, min = 3, max = 20))
numbers <- numbers %>% mutate(n_plot_r = runif(n=22, min = 3, max = 20))
numbers <- numbers %>% mutate(n_plot_r = if_else(var == "Total pregnancies", n_label, n_plot_)
numbers <- numbers %>% mutate(n_plot_r = if_else(var == "Total pregnancies", n_label, n_plot)
numbers <- numbers %>% mutate(n_plot_r = if_else(var == "Total pregnancies", n_label, n_plot))
numbers <- numbers %>% mutate(n_plot_r = if_else(var == "Total pregnancies", n_label, n_plot2))
numbers <- numbers %>% mutate(n_plot_r = if_else(var == "Total pregnancies", n_plot2, n_plot_r))
numbers <- numbers %>% mutate(n_plot_r = runif(n=22, min = 3, max = 20))
numbers <- numbers %>% mutate(n_plot_r = if_else(var == "Total pregnancies", n_plot2, n_plot_r))
numbers <- numbers %>% mutate(n_plot_r = n_plot + runif(n=22, min = 3, max = 20))
numbers <- numbers %>% mutate(n_plot_r = n_plot + runif(n=22, min = 3, max = 20))
